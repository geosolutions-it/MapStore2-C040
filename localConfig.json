{
  "geoStoreUrl": "rest/geostore/",
  "printUrl": "/geoserver-test/pdf/info.json",
  "proxyUrl": {
    "url": "/MapStore2/proxy/?url=",
    "useCORS": ["http://nominatim.openstreetmap.org", "https://nominatim.openstreetmap.org"]
  },
  "bingApiKey": "AhuXBu7ipR1gNbBfXhtUAyCZ6rkC5PkWpxs2MnMRZ1ZupxQfivjLCch22ozKSCAn",
  "translationsPath": "MapStore2/web/client/translations",
  "mapquestApiKey": "__API_KEY_MAPQUEST__",
  "initialMapFilter": "",
  "ignoreMobileCss" : true,
  "useAuthenticationRules": true,
  "authenticationRules": [
    {
      "urlPattern": ".*geostore.*",
      "method": "basic"
    }, {
      "urlPattern": "\\/geoserver.*",
      "method": "authkey"
    }
  ],
  "plugins": {
    "mobile": [
      {
        "name": "Map",
        "cfg": {
          "tools": ["locate"]
        }
      }, "DrawerMenu",
      {
        "name": "Identify",
        "showIn": ["Settings"],
        "cfg": {
          "style": {
            "position": "absolute",
            "width": "100%",
            "bottom": "0px",
            "zIndex": 1023,
            "maxHeight": "70%",
            "marginBottom": 0
          },
          "draggable": false,
          "collapsible": true,
          "viewerOptions": {
            "container": "{context.ReactSwipe}",
            "header": "{context.SwipeHeader}"
          },
          "bodyClass": "mobile-feature-info"
        }
      },
    {
      "name": "Locate",
      "override": {
        "Toolbar": {
          "alwaysVisible": true
        }
      }
    }, "Home", "TOC", {
        "name": "Tutorial",
        "cfg": {
          "preset": "mapMobile"
        }
    }, "BackgroundSwitcher", {
      "name": "Settings",
      "cfg": {
        "wrap": true
      }
    },
    {
      "name": "MousePosition",
      "cfg": {
        "id": "mapstore-mouseposition-mobile"
      }
    },
    {
      "name": "Search",
      "cfg": {
        "withToggle": ["max-width: 768px", "min-width: 768px"],
        "cfg": {
          "searchOptions": {
            "services": [{
                "type": "wfs",
                "priority": 2,
                "displayName": "${properties.NOMEVIA}",
                "subTitle": " (seleziona per cercare numero civico)",
                "options": {
                  "url": "/geoserver-test/wfs",
                  "typeName": "SITGEO:V_ASTE_STRADALI_TOPONIMO_SUB",
                  "queriableAttributes": ["NOMEVIA"],
                  "sortBy": "ID",
                  "srsName": "EPSG:4326",
                  "maxFeatures": 4
                },
                "nestedPlaceholder": "Digita numero civico o località",
                "then": [{
                      "type": "wfs",
                      "filterTemplate": " AND COD_STRADA = '${properties.COD_STRADA}'",
                      "priority": 1,
                      "displayName": "${properties.DESVIA} ${properties.TESTO}",
                      "subTitle": " (ricerca numero civico)",
                      "searchTextTemplate": "${properties.TESTO}",
                      "options": {
                        "url": "/geoserver-test/wfs",
                        "typeName": "SITGEO:CIVICI_COD_TOPON",
                        "queriableAttributes": ["TESTO"],
                        "srsName": "EPSG:4326",
                        "maxFeatures": 10
                      }
                  }]
            }, {
                "type": "nominatim",
                "searchTextTemplate": "${properties.display_name}",
                "options": {
                  "polygon_geojson": 1,
                  "limit": 3
                }
            }]
          },
          "withToggle": ["max-width: 768px", "min-width: 768px"]
        }
      }
    }, {
      "name": "Toolbar",
      "id": "NavigationBar",
      "cfg": {
        "id": "navigationBar"
      }
    }, {
      "name": "Toolbar",
      "id": "IdentifyBar",
      "stateSelector": "identify",
      "cfg": {
        "id": "identifyBar"
      },
      "isDefault": false
    }, "ZoomAll",
    {
      "name": "MapLoading",
      "override": {
        "Toolbar": {
          "alwaysVisible": true
        }
      }
    }, "Login",
    "OmniBar", "BurgerMenu", "Expander"
  ],
  "desktop": ["Map", "Help", "Share", "DrawerMenu",
    {
       "name": "Identify",
       "showIn": ["IdentifyBar", "Settings"],
       "cfg": {
         "viewerOptions": {
             "container": "{context.ReactSwipe}",
             "header": "{context.SwipeHeader}",
             "collapsible": false,
             "headerOptions": {
                "useButtons": true
             }
        }
       }
    },
    "Attribution",
    {
        "name": "Locate",
        "override": {
          "Toolbar": {
            "alwaysVisible": true
          }
        }
    }, "Home", "FeatureGrid", {
        "name": "TOC",
        "cfg": {
          "activateQueryTool": true
        }
    }, "Tutorial", "BackgroundSwitcher", {
        "name": "Measure",
        "cfg": {
          "showResults": false
        }
    }, "MeasureResults", {
      "name": "Print",
      "cfg": {
          "useFixedScales": true
        }
      }, "ShapeFile", {
      "name": "Settings",
      "cfg": {
        "wrap": true
      }
    }, {
        "name": "MetadataExplorer",
        "cfg": {
          "wrap": true,
          "initialCatalogURL": {
            "csw": "/geonetwork/srv/ita/csw",
            "wms": "/geoserver-test/wms",
            "wmts": "/geoserver-test/gwc/service/wmts"
          }
        }
    }, "MousePosition", {
        "name": "Search",
        "cfg": {
          "searchOptions": {
            "services": [{
                "type": "wfs",
                "priority": 2,
                "displayName": "${properties.NOMEVIA}",
                "subTitle": " (seleziona per cercare numero civico)",
                "options": {
                  "url": "/geoserver-test/wfs",
                  "typeName": "SITGEO:V_ASTE_STRADALI_TOPONIMO_SUB",
                  "queriableAttributes": ["NOMEVIA"],
                  "sortBy": "ID",
                  "srsName": "EPSG:4326",
                  "maxFeatures": 4
                },
                "nestedPlaceholder": "Digita numero civico o località",
                "then": [{
                      "type": "wfs",
                      "filterTemplate": " AND COD_STRADA = '${properties.COD_STRADA}'",
                      "priority": 1,
                      "displayName": "${properties.DESVIA} ${properties.TESTO}",
                      "subTitle": " (ricerca numero civico)",
                      "searchTextTemplate": "${properties.TESTO}",
                      "options": {
                        "url": "/geoserver-test/wfs",
                        "typeName": "SITGEO:CIVICI_COD_TOPON",
                        "queriableAttributes": ["TESTO"],
                        "srsName": "EPSG:4326",
                        "maxFeatures": 10
                      }
                  }]
            }, {
                "type": "nominatim",
                "searchTextTemplate": "${properties.display_name}",
                "options": {
                  "polygon_geojson": 1,
                  "limit": 3
                }
            }]
          },
          "withToggle": ["max-width: 768px", "min-width: 768px"]
        }
    }, {
      "name": "Toolbar",
      "id": "NavigationBar",
      "cfg": {
        "id": "navigationBar"
      }
    }, {
      "name": "Toolbar",
      "id": "IdentifyBar",
      "stateSelector": "identify",
      "cfg": {
        "id": "identifyBar"
      },
      "isDefault": false
    },
    "ScaleBox", "ZoomAll",
    {
      "name": "MapLoading",
      "override": {
        "Toolbar": {
          "alwaysVisible": true
        }
      }
    },
    {
        "name": "Snapshot",
        "cfg": {
          "wrap": true
        }
    },
    {
      "name":"ZoomIn",
      "override": {
        "Toolbar": {
          "alwaysVisible": true
        }
      }
    },
    {
      "name":"ZoomOut",
      "override": {
        "Toolbar": {
          "alwaysVisible": true
        }
      }
    },
    "OmniBar", "Login", "Save", "SaveAs", "BurgerMenu", "Expander", "Undo", "Redo"
  ],
    "embedded": [
      {
        "name": "Map",
        "cfg": {
          "tools": ["locate"]
        }
      }, "Help", "DrawerMenu",
      {
         "name": "Identify",
         "showIn": ["Settings"],
         "cfg": {
           "style": {
               "position": "absolute",
               "width": "100%",
               "bottom": "0px",
               "zIndex": 1010,
               "maxHeight": "70%",
               "marginBottom": 0
           },
           "draggable": false,
           "collapsible": true,
           "viewerOptions": {
             "container": "{context.ReactSwipe}",
             "header": "{context.SwipeHeader}",
             "collapsible": false
           },
           "bodyClass": "mobile-feature-info"
        }
      },
      {
          "name": "Locate",
          "override": {
            "Toolbar": {
              "alwaysVisible": true
            }
          }
      }, "TOC", "BackgroundSwitcher", {
          "name": "Settings",
          "cfg": {
            "wrap": true
          }
      },
      {
         "name": "MousePosition",
         "cfg": {
           "id": "mapstore-mouseposition-mobile"
         }
      },
      {
          "name": "Search",
          "cfg": {
            "withToggle": ["max-width: 768px", "min-width: 768px"]
          }
      }, {
        "name": "Toolbar",
        "id": "NavigationBar",
        "cfg": {
          "id": "navigationBar"
        }
      }, {
        "name": "Toolbar",
        "id": "IdentifyBar",
        "stateSelector": "identify",
        "cfg": {
          "id": "identifyBar"
        },
        "isDefault": false
      },
      {
        "name": "MapLoading",
        "override": {
          "Toolbar": {
            "alwaysVisible": true
          }
        }
      },
      "OmniBar", "BurgerMenu"
    ],
    "featureviewer": [{
        "name": "Map",
        "cfg": {
          "tools": [ "locate", "draw", "highlight"]
        }
      }, "Share",
      {
         "name": "Identify",
         "showIn": ["IdentifyBar", "Settings"],
         "cfg": {
           "viewerOptions": {
               "container": "{context.ReactSwipe}",
               "header": "{context.SwipeHeader}",
               "collapsible": false,
               "headerOptions": {
                  "useButtons": true
               }
          }
         }
      },
      "Attribution",
      {
          "name": "Locate",
          "override": {
            "Toolbar": {
              "alwaysVisible": true
            }
          }
      }, "FeatureGrid", {
        "name": "Toolbar",
        "id": "NavigationBar",
        "cfg": {
          "id": "navigationBar"
        }
      }, {
        "name": "Toolbar",
        "id": "IdentifyBar",
        "stateSelector": "identify",
        "cfg": {
          "id": "identifyBar"
        },
        "isDefault": false
      },
      {
        "name": "MapLoading",
        "override": {
          "Toolbar": {
            "alwaysVisible": true
          }
        }
      },

      {
        "name":"ZoomIn",
        "override": {
          "Toolbar": {
            "alwaysVisible": true
          }
        }
      },
      {
        "name":"ZoomOut",
        "override": {
          "Toolbar": {
            "alwaysVisible": true
          }
        }
      },
      "OmniBar", "Login", "BurgerMenu", "FeatureLoader"
    ],
    "common": [{
      "name": "OmniBar",
      "cfg": {
        "className": "navbar shadow navbar-home"
      }
    },"ManagerMenu", "Login", "Language"],
    "maps": [{"name": "Header", "hide": true }, "MapSearch", "CreateNewMap", "Maps", "Footer"],
    "manager": ["Header", "Redirect", "Manager", "Home", "UserManager", "GroupManager", "Footer"]
  }
}
